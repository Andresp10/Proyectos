@*@model FinalASP.Models.Pedido*@
@*@model Tuple<FinalASP.Models.Pedido, IEnumerable<FinalASP.Models.Producto>>*@
@model IEnumerable<FinalASP.Models.Producto>
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="apple-touch-icon" sizes="76x76" href="~/assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="~/assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Ingresar pedido - FinalASP</title>

    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">

    <!--     Fonts and icons     -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">

    <!-- CSS Files -->
    <link href="~/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/css/material-kit.css" rel="stylesheet">

    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="~/assets/css/demo.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="~/assets/css/dataTables.material.min.css">

</head>
<body style="background-color:white;">
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="logo-container">
                    <div class="logo">
                        <img src="~/assets/img/logo.png" class="img-circle img-responsive img-raised" alt="Creative Tim Logo" rel="tooltip" title="" data-placement="bottom" data-html="true" data-original-title="<b>Drogas Project</b> administrador de pedidos a domicilio <b>Creado por TrixyTeam :D</b>">
                    </div>
                    <div class="brand">
                        Drogas Project
                    </div>
                </div>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="~/Pedido/inicioPedido" data-toggle="tooltip" data-placement="bottom" title="Pedidos"><i class="material-icons">archive</i></a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>@Html.ActionLink("Cerrar Sesión", "Index", "Usuario")</li>
                </ul>

            </div>
        </div>
    </div>
    <div class="container body-content" style="margin-top:100px;">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    

                    <div class="col-md-10 col-md-offset-1">
                        <div class="card card-raised">
                            @*@using (Html.BeginForm())
                            {*@
                            <form method="post" action="/Pedido/CreatePedido">
                                @*@Html.AntiForgeryToken()*@
                                <div class="header header-primary text-left">
                                    <h5 style="margin-left:30px;margin-bottom:5px;">Realizar pedido</h5>
                                    <small style="margin-left:30px;margin-top:1px;">Complete los campos</small>
                                </div>
                                <div class="content col-md-10 col-md-offset-1">

                                    @*<div class="input-group">
                <span class="input-group-addon">
                    <i class="material-icons">assignment_ind</i>
                </span>
                <div class="form-group is-empty">
                    @Html.EditorFor(model => model.Estado, new { htmlAttributes = new { @class = "form-control", @placeholder = "Estado" } })
                    @Html.ValidationMessageFor(model => model.Estado, "", new { @class = "text-danger" })
                    <span class="material-input"></span>
                </div>
            </div>*@
                                    <input type="text" value="Solicitado" id="Estado" name="Estado" style="display:none" />
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="material-icons">directions</i>
                                        </span>
                                        <div class="form-group is-empty">
                                            @*@Html.EditorFor(model => model.Direccion, new { htmlAttributes = new { @class = "form-control", @placeholder = "Direccion" } })
                        @Html.ValidationMessageFor(model => model.Direccion, "", new { @class = "text-danger" })*@
                                            <input class="form-control text-box single-line" data-val="true" data-val-required="Ingrese la direccion" id="Direccion" name="Direccion" placeholder="Direccion" type="text" value="">
                                            <span class="field-validation-valid text-danger" data-valmsg-for="Direccion" data-valmsg-replace="true"></span>
                                            <span class="material-input"></span>
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="material-icons">timer</i>
                                        </span>
                                        <div class="form-group is-empty">
                                            @*@Html.EditorFor(model => model.Productos, new { htmlAttributes = new { @class = "form-control", @placeholder = "Productos" } })
                        <a href="#myModal" data-toggle="modal" data-target="#myModal">Agregar productos</a>
                        @Html.ValidationMessageFor(model => model.Productos, "", new { @class = "text-danger" })*@
                                            <input disabled class="form-control text-box single-line" data-val="true" data-val-required="Agregue productos" id="Productos" name="Productos" placeholder="Productos" type="text" value="">
                                            <a href="#myModal" data-toggle="modal" data-target="#myModal">Agregar productos</a>
                                            <span class="field-validation-valid text-danger" data-valmsg-for="Productos" data-valmsg-replace="true"></span>
                                            <span class="material-input"></span>
                                        </div>
                                    </div>
                                    <div class="input-group" style="display:none;">
                                        <span class="input-group-addon">
                                            <i class="material-icons">loyalty</i>
                                        </span>
                                        <div class="form-group is-empty">
                                            @*@Html.DropDownList("Cliente", null, htmlAttributes: new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.Cliente, "", new { @class = "text-danger" })*@
                                            <select class="form-control" id="Cliente" name="Cliente">
                                                <option value="1">pepe@gmail.com</option>
                                                <option value="2">a@gmail.com</option>
                                                <option value="3">vvv@gmail.com</option>
                                                <option value="4">qqq@gmail.com</option>
                                                <option value="5">ppp@gmail.com</option>
                                                <option value="6">dd@gmail.com</option>
                                            </select>
                                            <span class="field-validation-valid text-danger" data-valmsg-for="Cliente" data-valmsg-replace="true"></span>
                                            <span class="material-input"></span>
                                        </div>
                                    </div>

                                </div>
                                <div class="footer text-center col-md-offset-6" style="padding-bottom:20px;">
                                    <a href="/Pedido/inicioPedido" class="btn btn-default">Volver</a>
                                    <button class="btn btn-success" type="submit">Confirmar<div class="ripple-container"></div></button>
                                </div>
                            </form>
                            @*}*@
                        </div>
                    </div>
                    <!-- Modal Core -->
                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="myModalLabel">Agregar Productos</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col--md-10">
                                            <table class="table display" id="example">
                                                <thead>
                                                    <tr>
                                                        <th>Referencia</th>
                                                        <th>Nombre</th>
                                                        <th>Precio</th>
                                                        <th>Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var item in Model)
                                                    {
                                                        <tr>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Referencia)
                                                                
                                                            </td>
                                                            <td>
                                                                <p id="@Html.DisplayFor(modelItem => item.idProducto)">@Html.DisplayFor(modelItem => item.Nombre)</p>
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Precio)
                                                            </td>
                                                            <td>
                                                                <button value="@Html.DisplayFor(modelItem => item.Nombre)" onclick="add(this)" class="btn-tooltip" data-toggle="tooltip" data-placement="bottom" title="" data-container="body" data-original-title="Agregar" style="background-color:transparent;border:none;">
                                                                    <i class="material-icons" style="color:#3498db">add_circle</i>
                                                                    <div class="ripple-container"></div>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cerrar</button>
                                    <button type="button" class="btn btn-info btn-simple">OK</button>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </div>
    </div>
    <!--   Core JS Files   -->
    <script src="~/assets/js/jquery.min.js" type="text/javascript"></script>
    <script src="~/assets/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="~/assets/js/material.min.js"></script>

    <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="~/assets/js/nouislider.min.js" type="text/javascript"></script>

    <!--  Plugin for the Datepicker, full documentation here: http://www.eyecon.ro/bootstrap-datepicker/ -->
    <script src="~/assets/js/bootstrap-datepicker.js" type="text/javascript"></script>

    <!-- Control Center for Material Kit: activating the ripples, parallax effects, scripts from the example pages etc -->
    <script src="~/assets/js/material-kit.js" type="text/javascript"></script>

    <script type="text/javascript">

		$().ready(function(){
			// the body of this function is in assets/material-kit.js
			materialKit.initSliders();
            window_width = $(window).width();

            if (window_width >= 992){
                big_image = $('.wrapper > .header');

				$(window).on('scroll', materialKitDemo.checkScrollForParallax);
			}

		});
    </script>
    <script src="~/assets/js/jquery.dataTables.js"></script>
    <script src="~/assets/js/dataTables.material.js"></script>
    <script>
        $(document).ready(function () {
            $('#example').DataTable();
        });
    </script>

    <script>
        $(".buscarProducto").keyup(function () {
            var producto = $("#txtProductoBuscar").val();
            $.ajax({
                url: '@Url.Action("Buscar", "Productoes")',
                data: { producto: producto },
                type: "GET",
                dataType: "json",
                cache: false,
                success: function (retorno) {
                    console.log(retorno);
                    /*$.each(retorno, function (i, item) {
                        console.log(item);
                    });*/
                },
                error: function (e) {
                    alert("Se ha producido un error");
                    console.log(e);
                }
            });
            /*$.getJSON("/Productoes/Buscar", {producto:producto}, function (responseText) {
                //alert(responseText.Producto);
                console.log(responseText);
                if (responseText != "false") {



                }

            });*/

        });
    </script>
    <script>
        function add(e) {

            var text = $("#Productos").val();
            if (text == "") {

                $("#Productos").val(e.value);
                alert("Producto agregado");
            } else {

                $("#Productos").val(text + "," + e.value);
                alert("Producto agregado");
            }
        }
    </script>

    @*@RenderSection("scripts", required: false)*@
</body>
</html>
